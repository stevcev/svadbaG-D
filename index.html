<!DOCTYPE html>
<html lang="mk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Гордана & Димитар - 29.08.2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@300;400;700&family=Playfair+Display:ital@0;1&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #d4a3a3; --text: #4a4a4a; --bg: #fff9f9; }
        body { font-family: 'Montserrat', sans-serif; background-color: var(--bg); margin: 0; padding: 0; color: var(--text); background-image: url('https://www.transparenttextures.com/patterns/paper.png'); }
        .flower-bg { position: fixed; width: 300px; opacity: 0.15; z-index: -1; }
        .top-left { top: -50px; left: -50px; transform: rotate(180deg); }
        .bottom-right { bottom: -50px; right: -50px; }
        .page { display: none; padding: 40px 20px; animation: fadeIn 0.8s ease-in-out; }
        .active { display: block; }
        .hero { text-align: center; padding-top: 40px; }
        .hero h1 { font-family: 'Great Vibes', cursive; font-size: 4rem; color: var(--accent); margin: 0; }
        .hero h2 { font-family: 'Playfair Display', serif; font-size: 1.2rem; font-style: italic; letter-spacing: 2px; }
        .timer-container { margin: 25px auto; background: rgba(255, 255, 255, 0.6); padding: 15px; border-radius: 15px; max-width: 400px; border: 1px solid rgba(212, 163, 163, 0.3); }
        #countdown { font-family: 'Playfair Display', serif; font-size: 1.4rem; font-weight: bold; }
        .nav-buttons { display: flex; flex-direction: column; gap: 10px; align-items: center; margin-top: 20px; }
        .btn { width: 280px; padding: 14px; font-size: 14px; border: 1px solid var(--accent); background: white; color: var(--text); cursor: pointer; border-radius: 5px; transition: 0.4s; font-weight: bold; letter-spacing: 1px; }
        .btn:hover { background: var(--accent); color: white; }
        .content-box { max-width: 600px; margin: auto; background: white; padding: 25px; border-radius: 5px; box-shadow: 0 10px 30px rgba(212, 163, 163, 0.15); text-align: center; border: 1px solid #f2e4e4; }
        .btn-back { margin-top: 20px; background: none; border: none; color: var(--accent); text-decoration: underline; cursor: pointer; display: block; margin: 20px auto; }
        input, textarea, select { width: 90%; padding: 12px; margin: 10px 0; border: 1px solid var(--accent); border-radius: 5px; font-family: 'Montserrat', sans-serif; background: white; }
        label { display: block; text-align: left; margin-left: 5%; font-size: 0.8rem; color: #888; margin-top: 10px; }
        #messagesList { text-align: left; margin-top: 20px; max-height: 350px; overflow-y: auto; border-top: 1px solid #eee; padding-top: 10px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <img src="https://www.freeiconspng.com/uploads/flower-png-21.png" class="flower-bg top-left">
    <img src="https://www.freeiconspng.com/uploads/flower-png-21.png" class="flower-bg bottom-right">

    <div id="homePage" class="page active">
        <div class="hero">
            <h1>Гордана & Димитар</h1>
            <h2>29.08.2026 • 19:00ч</h2>
            <div class="timer-container"><div id="countdown">Се вчитавува...</div></div>
            <div class="nav-buttons">
                <button class="btn" onclick="showPage('tablePage')">НАЈДИ ЈА ТВОЈАТА МАСА</button>
                <button class="btn" onclick="showPage('menuPage')">ПОГЛЕДНИ ГО МЕНИТО</button>
                <button class="btn" onclick="showPage('bandPage')">ЗАБАВА: БЕНД ПАНТА РЕИ</button>
                <button class="btn" onclick="showPage('galleryPage')">ГАЛЕРИЈА СО СЛИКИ</button>
                <button class="btn" onclick="showPage('guestbookPage')">КНИГА НА ВПЕЧАТОЦИ</button>
            </div>
            <div style="max-width:600px; margin: 40px auto; padding: 20px; border-top: 1px solid var(--accent);">
                <h3 style="font-family: 'Great Vibes', cursive; font-size: 2.5rem; color: var(--accent);">Нашата Приказна</h3>
                <p style="font-style: italic; color: #666;">Тука ќе биде вметнат вашиот текст за тоа како започна сè. Од првиот поглед до денот кога ќе кажеме "ДА", секој момент е вреден за паметење...</p>
            </div>
        </div>
    </div>

    <div id="tablePage" class="page">
        <div class="content-box">
            <h2 style="font-family: 'Playfair Display', serif; color: var(--accent);">Вашата Маса</h2>
            <input type="text" id="guestNameSearch" placeholder="Внесете Име и Презиме">
            <div style="background: #fff; padding: 10px; border: 1px solid #eee; margin: 10px 0;">
                <canvas id="captchaCanvas" width="150" height="50" onclick="generateCaptcha()"></canvas>
                <input type="text" id="captchaInput" placeholder="Код од сликата">
            </div>
            <button class="btn" style="width:100%; background: var(--accent); color: white;" onclick="findTable()">ПРЕБАРАЈ</button>
            <div id="result" style="display:none; margin-top: 25px;">
                <h3 id="welcomeMsg" style="font-family: 'Great Vibes', cursive; font-size: 2rem;"></h3>
                <div style="font-size: 2rem; font-weight: bold; color: var(--accent);" id="tableNumResult"></div>
                <div id="otherGuests" style="text-align: left; background: #fff9f9; padding: 15px; margin-top: 15px; border-left: 2px solid var(--accent);"></div>
            </div>
            <button class="btn-back" onclick="showPage('homePage')">← НАЗАД</button>
        </div>
    </div>

    <div id="menuPage" class="page">
        <div class="content-box">
            <h2 style="font-family: 'Great Vibes', cursive; font-size: 3rem; color: var(--accent);">Свадбено Мени</h2>
            <div style="text-align: left; font-family: 'Playfair Display', serif; line-height: 1.8;">
                <p><strong>1. Ладно предјадење:</strong> Македонска даска</p>
                <p><strong>2. Салата:</strong> Шопска салата</p>
                <p><strong>3. Топло предјадење:</strong> Сармички и похуван кашкавал</p>
                <p><strong>4. Главно јадење:</strong> Мешана скара и печен компир</p>
                <p><strong>5. Десерт:</strong> Свадбена торта</p>
            </div>
            <button class="btn-back" onclick="showPage('homePage')">← НАЗАД</button>
        </div>
    </div>

    <div id="bandPage" class="page">
        <div class="content-box">
            <h2 style="font-family: 'Great Vibes', cursive; font-size: 3rem; color: var(--accent);">За забавата...</h2>
            <p>За подиумот да биде постојано полн и атмосферата незаборавна, задолжени се нашите пријатели од <strong>Бенд Панта Реи</strong>.</p>
            <a href="https://www.facebook.com/pantareiband/" target="_blank" class="btn" style="display:inline-block; text-decoration:none;">Посетете го нивниот профил</a>
            <button class="btn-back" onclick="showPage('homePage')">← НАЗАД</button>
        </div>
    </div>

    <div id="galleryPage" class="page">
        <div class="content-box">
            <h2 style="font-family: 'Great Vibes', cursive; font-size: 3rem; color: var(--accent);">Галерија</h2>
            <iframe src="https://drive.google.com/embeddedfolderview?id=1GVUUnoIENIBSa8nkoXiN742IKkS_XSJx#grid" style="width: 100%; height: 400px; border: none; border-radius: 10px; background: #eee;"></iframe>

            <div style="margin-top: 30px; padding: 20px; border: 1px dashed var(--accent); border-radius: 10px; background: #fffcfc;">
                <h4>Прикачи твоја слика или видео</h4>
                <p style="font-size: 0.8rem; color: #880000; font-weight: bold;">⚠️ НАПОМЕНА: Објавите се јавни за сите гости!</p>
                <div id="uploadCaptchaArea">
                    <canvas id="uploadCaptchaCanvas" width="150" height="50" onclick="generateUploadCaptcha()" style="cursor:pointer;"></canvas>
                    <input type="text" id="uploadCaptchaInput" placeholder="Код од сликата">
                    <button class="btn" style="width:100%;" onclick="verifyAndUpload()">ПРИКАЧИ ФАЈЛ</button>
                </div>
                <div id="uploadLink" style="display: none; margin-top: 15px;">
                    <a href="ВМЕТНЕТЕ_ЛИНК_ОД_GOOGLE_FORM_ТУКА" target="_blank" class="btn" style="display: block; text-decoration: none; background: var(--accent); color: white;">КЛИКНИ ТУКА ЗА ПРИКАЧУВАЊЕ</a>
                </div>
            </div>
            <button class="btn-back" onclick="showPage('homePage')">← НАЗАД</button>
        </div>
    </div>

    <div id="guestbookPage" class="page">
        <div class="content-box">
            <h2 style="font-family: 'Great Vibes', cursive; font-size: 3rem; color: var(--accent);">Вашите Желби</h2>
            
            <div style="text-align: left;">
                <label>Број на вашата маса:</label>
                <input type="number" id="guestbookTableNum" placeholder="пр. 1" oninput="filterGuestNames()">
                
                <label>Изберете го вашето име:</label>
                <select id="visitorNameSelect">
                    <option value="">-- Внеси број на маса --</option>
                </select>

                <label>Порака:</label>
                <textarea id="visitorMessage" placeholder="Вашата порака до нас..."></textarea>
                
                <button id="sendBtn" class="btn" style="width:100%; background: var(--accent); color: white;" onclick="postMessage()">ОБЈАВИ</button>
            </div>

            <div id="statusMsg" style="display:none; margin: 10px 0; color: var(--accent); font-weight: bold;">Се испраќа...</div>
            <div id="messagesList">Се вчитуваат пораките...</div>
            
            <button class="btn-back" onclick="showPage('homePage')">← НАЗАД</button>
        </div>
    </div>

    <script>
        const apiURL = "https://sheetdb.io/api/v1/z8rku0vozkyiq";
        const weddingDate = new Date("August 29, 2026 19:00:00").getTime();

        // ЛИСТА НА ГОСТИ (Дополнете ја со сите имиња)
        const guestList = [
            { name: "Гордана Стевчева", table: 1 },
            { name: "Димитар Стевчев", table: 1 },
            { name: "Васко Стевчев", table: 2 },
            { name: "Габриела Стевчева", table: 2 },
            { name: "Ѓоке Гргушовски", table: 1 }
        ];

        // Навигација
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            window.scrollTo(0, 0);
            if(pageId === 'tablePage') generateCaptcha();
            if(pageId === 'guestbookPage') {
                loadMessages();
                document.getElementById('guestbookTableNum').value = "";
                document.getElementById('visitorNameSelect').innerHTML = '<option value="">-- Внеси број на маса --</option>';
            }
            if(pageId === 'galleryPage') {
                generateUploadCaptcha();
                document.getElementById('uploadCaptchaArea').style.display = 'block';
                document.getElementById('uploadLink').style.display = 'none';
            }
        }

        // Тајмер
        setInterval(() => {
            const now = new Date().getTime();
            const d = weddingDate - now;
            document.getElementById("countdown").innerHTML = Math.floor(d/(1000*60*60*24)) + "д " + Math.floor((d%(1000*60*60*24))/(1000*60*60)) + "ч " + Math.floor((d%(1000*60*60))/(1000*60)) + "м " + Math.floor((d%(1000*60))/1000) + "с";
        }, 1000);

        // Книга на впечатоци - Филтрирање имиња
        function filterGuestNames() {
            const tableNum = parseInt(document.getElementById('guestbookTableNum').value);
            const select = document.getElementById('visitorNameSelect');
            select.innerHTML = '<option value="">-- Избери име --</option>';
            if (isNaN(tableNum)) return;

            const filtered = guestList.filter(g => g.table === tableNum);
            if (filtered.length > 0) {
                filtered.forEach(g => {
                    const opt = document.createElement('option');
                    opt.value = g.name; opt.textContent = g.name; select.appendChild(opt);
                });
            } else {
                const opt = document.createElement('option');
                opt.value = ""; opt.textContent = "Нема гости на оваа маса"; select.appendChild(opt);
            }
        }

        // Книга на впечатоци - Вчитување/Праќање
        function loadMessages() {
            fetch(apiURL).then(r => r.json()).then(data => {
                const list = document.getElementById('messagesList');
                list.innerHTML = data.length === 0 ? "Бидете први што ќе остават порака!" : "";
                data.reverse().forEach(item => {
                    const div = document.createElement('div');
                    div.style.cssText = "border-bottom: 1px solid #f2e4e4; padding: 10px 0;";
                    div.innerHTML = `<strong style="color:var(--accent)">${item.name}:</strong><p style="font-style:italic; margin:5px 0;">${item.message}</p>`;
                    list.appendChild(div);
                });
            });
        }

        function postMessage() {
            const name = document.getElementById('visitorNameSelect').value;
            const msg = document.getElementById('visitorMessage').value;
            if(!name || !msg) return alert("Изберете име и напишете порака!");
            
            const btn = document.getElementById('sendBtn');
            const status = document.getElementById('statusMsg');
            btn.disabled = true; status.style.display = "block";

            fetch(apiURL, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({data: [{name, message: msg}]})
            }).then(() => {
                status.innerText = "Успешно објавено! ✨";
                document.getElementById('visitorMessage').value = "";
                btn.disabled = false; loadMessages();
                setTimeout(() => status.style.display="none", 3000);
            });
        }

        // CAPTCHAs
        let currentCaptcha = "", currentUploadCaptcha = "";
        function generateCaptcha() {
            const canvas = document.getElementById("captchaCanvas");
            const ctx = canvas.getContext("2d");
            currentCaptcha = Math.random().toString(36).substring(2, 7).toUpperCase();
            ctx.clearRect(0,0,150,50); ctx.fillStyle="#fff"; ctx.fillRect(0,0,150,50);
            ctx.font="bold 24px Arial"; ctx.fillStyle="#d4a3a3"; ctx.fillText(currentCaptcha, 35, 35);
        }
        function generateUploadCaptcha() {
            const canvas = document.getElementById("uploadCaptchaCanvas");
            const ctx = canvas.getContext("2d");
            currentUploadCaptcha = Math.random().toString(36).substring(2, 7).toUpperCase();
            ctx.clearRect(0,0,150,50); ctx.fillStyle="#fff"; ctx.fillRect(0,0,150,50);
            ctx.font="bold 24px Arial"; ctx.fillStyle="#d4a3a3"; ctx.fillText(currentUploadCaptcha, 35, 35);
        }
        function verifyAndUpload() {
            if (document.getElementById('uploadCaptchaInput').value.toUpperCase() === currentUploadCaptcha) {
                document.getElementById('uploadCaptchaArea').style.display = 'none';
                document.getElementById('uploadLink').style.display = 'block';
            } else { alert("Погрешен код!"); generateUploadCaptcha(); }
        }

        // Пребарување маси
        function simplify(t) {
            const map = {'а':'a','б':'b','в':'v','г':'g','д':'d','ѓ':'gj','е':'e','ж':'zh','з':'z','ѕ':'dz','и':'i','ј':'j','к':'k','л':'l','љ':'lj','м':'m','н':'n','њ':'nj','о':'o','п':'p','р':'r','с':'s','т':'t','ќ':'kj','у':'u','ф':'f','х':'h','ц':'c','ч':'ch','џ':'dz','ш':'sh'};
            return t.toLowerCase().trim().split('').map(c => map[c] || c).join('').replace(/ch/g,'c').replace(/sh/g,'s');
        }

        function findTable() {
            if(document.getElementById('captchaInput').value.toUpperCase() !== currentCaptcha) return alert("Погрешен код!");
            const input = document.getElementById('guestNameSearch').value;
            const guest = guestList.find(g => simplify(g.name) === simplify(input));
            if(guest) {
                document.getElementById('welcomeMsg').innerText = "Здраво, " + guest.name;
                document.getElementById('tableNumResult').innerText = "МАСА " + guest.table;
                const mates = guestList.filter(g => g.table === guest.table && g.name !== guest.name);
                document.getElementById('otherGuests').innerHTML = "<strong>На вашата маса:</strong><br>" + mates.map(m => "• " + m.name).join('<br>');
                document.getElementById('result').style.display = 'block';
            } else alert("Името не е пронајдено.");
        }
    </script>
</body>
</html>